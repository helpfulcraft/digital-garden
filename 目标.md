好的，既然您已经有 GitHub Pages 的使用经验，那这个教程对您来说会非常清晰和直接。我们将采用最标准、最现代化的方式：**通过 GitHub Actions 自动构建和部署 Quartz 网站**。

这个教程会手把手地带您完成每一步，最终实现的效果是：**您只需要在 Obsidian 里写笔记并推送到 GitHub，网站就会自动更新。**

---

### **完整教程：使用 GitHub Pages 部署 Quartz 数字花园**

#### **前提条件**

1.  **Obsidian 仓库**: 您存放笔记的文件夹，我们称之为 `MyNotes`。
2.  **GitHub 账号**: 您已经有了。
3.  **Git**: 您的电脑上已安装。
4.  **Node.js 和 npm**: Quartz 是一个 Node.js 项目，需要它们来构建。请确保已安装较新版本（推荐 v18 或更高）。可以在命令行输入 `node -v` 和 `npm -v` 检查。

---

### **第一步：创建两个 GitHub 仓库**

您需要两个独立的仓库：一个用于存放 Quartz 的**网站代码**，另一个用于存放您的**笔记内容**。这种分离是最佳实践，能让管理更清晰。

1.  **创建笔记仓库 (如果还没有的话)**
    *   如果您的 `MyNotes` 文件夹还不是一个 Git 仓库，请将它初始化并推送到 GitHub。
    *   在 GitHub 上创建一个新的**私有 (Private)**仓库，例如 `my-obsidian-notes`。（设为私有可以保护您不希望公开的笔记草稿，Quartz 只会发布您指定的内容）。
    *   将您的本地 `MyNotes` 文件夹关联并推送到这个新仓库。

2.  **创建 Quartz 网站仓库**
    *   打开 Quartz 的官方模板：[https://github.com/jackyzha0/quartz](https://github.com/jackyzha0/quartz)
    *   点击右上角的 **"Use this template"** -> **"Create a new repository"**。
    *   **Repository name**: 给他起一个名字，这将是您网址的一部分。例如 `digital-garden`。
    *   **Description**: （可选）写个描述。
    *   **Public/Private**: **必须设置为 `Public` (公开)**，因为 GitHub Pages 的免费服务只针对公开仓库。
    *   点击 **"Create repository"**。

现在，您应该在 GitHub 上拥有了两个仓库：
*   `your-username/my-obsidian-notes` (私有，存放笔记)
*   `your-username/digital-garden` (公开，存放网站代码)

---

### **第二步：在本地建立项目结构**

接下来，我们在您的电脑上把这两个仓库关联起来。

1.  **克隆网站仓库到本地**
    打开您的命令行工具（Terminal / Git Bash）。
    ```bash
    git clone https://github.com/your-username/digital-garden.git
    cd digital-garden
    ```

2.  **将笔记仓库添加为子模块 (Submodule)**
    这是最关键的一步。我们告诉 `digital-garden` 项目，笔记内容来自于 `my-obsidian-notes`。
    ```bash
    # 语法: git submodule add <你的笔记仓库SSH或HTTPS链接> content
    # 'content' 是 Quartz 默认读取内容的文件夹名，必须是这个名字。
    
    # 使用 SSH (推荐，如果配置过SSH key)
    git submodule add git@github.com:your-username/my-obsidian-notes.git content
    
    # 或者使用 HTTPS
    # git submodule add https://github.com/your-username/my-obsidian-notes.git content
    ```
    运行后，您会发现 `digital-garden` 文件夹下多了一个 `content` 文件夹，里面就是您所有的笔记。同时还多了一个 `.gitmodules` 文件，记录了这种关联关系。

---

### **第三步：配置 Quartz 和 GitHub Actions**

现在我们来配置网站本身和自动化部署流程。

1.  **自定义 Quartz (可选但推荐)**
    *   在 `digital-garden` 文件夹里，打开 `quartz.config.ts` 文件。
    *   这里可以修改网站标题、URL、主题颜色、菜单等。
    *   **最重要的一步是配置 `baseUrl`**。对于 GitHub Pages，它的格式是 `your-username.github.io/repository-name`。
        ```typescript
        // quartz.config.ts
        const config: QuartzConfig = {
          configuration: {
            pageTitle: "🪴 My Digital Garden", // 你的网站标题
            // ...其他配置
            baseUrl: "your-username.github.io/digital-garden", // ⚠️ 必须修改成你的！
            // ...
          },
          // ...
        }
        ```
    *   保存文件。

2.  **创建 GitHub Actions 配置文件**
    *   在 `digital-garden` 项目的根目录下，创建文件夹路径：`.github/workflows/`。
    *   在此文件夹下，创建一个新文件 `deploy.yml`。
    *   将下面的代码**完整地复制**到 `deploy.yml` 文件中：

    ```yaml
    # .github/workflows/deploy.yml
    
    name: Deploy Quartz to GitHub Pages

    on:
      push:
        branches:
          - main # 确保这是你的主分支名 (可能是 main 或 master)

    permissions:
      contents: read
      pages: write
      id-token: write

    jobs:
      build:
        runs-on: ubuntu-latest
        steps:
          - name: Checkout repository
            uses: actions/checkout@v4
            with:
              # 这一步至关重要，它会同时拉取主项目和子模块（你的笔记）
              submodules: 'recursive'
              fetch-depth: 0

          - name: Setup Pages
            uses: actions/configure-pages@v4

          - name: Setup Node.js
            uses: actions/setup-node@v4
            with:
              node-version: "18"
              cache: "npm"

          - name: Install dependencies
            run: npm install

          - name: Build Quartz site
            run: npx quartz build

          - name: Upload artifact
            uses: actions/upload-pages-artifact@v3
            with:
              path: public # Quartz 构建出的静态文件默认在 public 文件夹

      deploy:
        needs: build
        environment:
          name: github-pages
          url: ${{ steps.deployment.outputs.page_url }}
        runs-on: ubuntu-latest
        steps:
          - name: Deploy to GitHub Pages
            id: deployment
            uses: actions/deploy-pages@v4
    ```

3.  **提交所有更改**
    将我们刚刚的所有操作（添加子模块、修改配置、创建 workflow 文件）提交到 GitHub。
    ```bash
    git add .
    git commit -m "feat: Initial setup for Quartz with submodule and GH Actions"
    git push origin main
    ```

---

### **第四步：在 GitHub 上启用 Pages 并完成部署**

1.  **设置 Pages 源**
    *   打开您的 `digital-garden` 仓库的 GitHub 页面。
    *   点击 **Settings** -> **Pages** (在左侧边栏)。
    *   在 "Build and deployment" 下，将 **Source** 设置为 **GitHub Actions**。

2.  **触发并检查部署**
    *   您刚刚的 `git push` 操作应该已经自动触发了第一次部署。
    *   点击仓库顶部的 **Actions** 标签页，您会看到一个正在运行或已完成的 workflow，名为 "Deploy Quartz to GitHub Pages"。
    *   点进去可以查看详细的构建和部署日志。整个过程可能需要 2-5 分钟。

3.  **访问您的网站！**
    *   当 Actions 显示绿色的对勾，表示部署成功。
    *   回到 **Settings -> Pages** 页面，您会看到 "Your site is live at..." 的提示，以及您的网站网址。
    *   网址通常是：`https://your-username.github.io/digital-garden/`

恭喜！您的 Quartz 数字花园已经成功部署。

---

### **后续日常更新流程 (非常简单)**

您的日常工作流将完全在 Obsidian 和命令行中进行，无需再关心网站部署。

**当您在 Obsidian 中写了新笔记或修改了旧笔记后：**

1.  **更新笔记仓库**:
    *   打开命令行，进入您的**本地笔记文件夹**（也就是 `digital-garden/content`）。
    *   提交并推送您的笔记更改。
        ```bash
        cd content  # 进入子模块目录
        git add .
        git commit -m "docs: add new note about something"
        git push
        cd .. # 回到主项目目录
        ```

2.  **更新主项目以指向新的笔记版本**:
    *   子模块更新后，主项目 (`digital-garden`) 会检测到 `content` 有了新的 commit。
    *   您需要提交这个“指针”的更新。
        ```bash
        git add content
        git commit -m "chore: update notes submodule"
        git push
        ```
    *   这次 `push` 会**自动触发 GitHub Actions**，您的网站将在几分钟后更新。

**简化流程小技巧**: 您可以写一个简单的脚本来自动完成上面两步的提交，实现一键更新。