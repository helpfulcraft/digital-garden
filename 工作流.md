# 工作流指南：从 Obsidian 到数字花园网站

本文档介绍如何使用 Obsidian 编写笔记，并自动更新到您的数字花园网站。

## 准备工作

1. **Obsidian 已安装**：您已经安装了 Obsidian 并创建了笔记库
2. **Git 插件已安装**：在 Obsidian 中已安装 Git 插件
3. **仓库结构已设置**：您的笔记作为子模块存在于 `digital-garden` 项目中

## 工作流程

### 方法一：使用自动化脚本（推荐）

这是最简单的方法，只需一键执行脚本即可完成所有操作。

1. **在 Obsidian 中编写或修改笔记**
   - 正常使用 Obsidian 编写、编辑您的笔记
   - 可以创建新文件、修改现有文件或调整文件结构

2. **使用 Obsidian Git 插件提交更改**（可选）
   - 在 Obsidian 中使用 Git 插件提交您的更改
   - 快捷键 `Ctrl+P` 打开命令面板，搜索 "Git: Commit all changes"
   - 输入提交信息，例如 "update: 更新笔记内容"
   - 执行 "Git: Push" 命令推送更改

3. **运行自动化脚本**
   - 打开 PowerShell（在 Windows 资源管理器中，在 `digital-garden` 文件夹内右键选择"在终端中打开"）
   - 执行脚本：`.\update.ps1`
   - 脚本会自动处理所有 Git 操作，包括提交子模块更改和更新主项目

4. **等待部署完成**
   - GitHub Actions 会自动构建和部署您的网站
   - 几分钟后，您可以访问 `https://helpfulcraft.github.io/digital-garden` 查看更新

### 方法二：手动执行 Git 命令

如果您希望更精细地控制每一步，可以手动执行 Git 命令。

1. **在 Obsidian 中编写或修改笔记**

2. **提交笔记更改**
   ```powershell
   # 进入笔记子模块目录
   cd content
   
   # 添加所有更改
   git add .
   
   # 提交更改
   git commit -m "update: 更新笔记内容"
   
   # 推送到远程仓库
   git push
   ```

3. **更新主项目中的子模块引用**
   ```powershell
   # 返回主项目目录
   cd ..
   
   # 添加子模块更改
   git add content
   
   # 提交子模块引用更新
   git commit -m "update: 更新笔记子模块引用"
   
   # 推送到远程仓库
   git push origin main
   ```

4. **等待部署完成**

## 常见问题

### 如何处理冲突？

如果您在不同设备上编辑了同一个文件，可能会遇到冲突。解决方法：

1. 在执行 `git push` 之前，先执行 `git pull`
2. 解决冲突后再提交和推送

### 如何添加新笔记？

1. 在 Obsidian 中创建新笔记
2. 按照上述工作流程提交和推送更改
3. 如果希望在首页显示，编辑 `content/index.md` 添加链接

### 如何修改网站配置？

如需修改网站标题、颜色等配置：

1. 编辑 `digital-garden` 项目中的 `quartz.config.ts` 文件
2. 提交并推送更改
3. GitHub Actions 会自动重新构建网站

## 提示与技巧

1. **定期更新**：养成定期提交和推送的习惯，避免大量更改一次提交
2. **有意义的提交信息**：使用清晰的提交信息，便于日后查看历史记录
3. **使用 Obsidian Git 插件**：可以直接在 Obsidian 中执行基本的 Git 操作
4. **检查 GitHub Actions**：如果网站没有更新，可以在 GitHub 仓库的 Actions 标签页检查构建状态

## 结语

通过这个工作流程，您可以专注于在 Obsidian 中创作内容，而不必担心网站部署的技术细节。只需编写笔记，运行脚本，网站就会自动更新。 